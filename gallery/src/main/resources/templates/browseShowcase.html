<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title th:text="'Showcase: ' + ${showcase.name}"></title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/lcstyle.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<!-- HEADER -->
<header class="header" th:with="user=${session.loggedInUser}">
  <a th:href="@{/MainGallery/HomePage}" class="logo">LOGO GOES HERE</a>

  <nav class="nav-items" th:with="user=${session.loggedInUser}">
    <a th:href="@{/MainGallery/HomePage}">Home</a>
    <a th:href="@{/MainGallery/about}">About</a>
    <a th:href="@{/MainGallery/contact}">Contact</a>

    <!-- Not logged in -->
    <a th:if="${user == null}" th:href="@{/MainGallery/Register}" style="color: blue;">Register</a>
    <a th:if="${user == null}" th:href="@{/MainGallery/Login}" style="color: blue;">Login</a>

    <!-- Logged in: role-aware Dashboard + Logout -->
    <span th:if="${user != null}" th:switch="${#strings.toLowerCase(user.userType)}">
      <a th:case="'admin'"        th:href="@{/MainGallery/adminDashboard}">Dashboard</a>
      <a th:case="'senioradmin'"  th:href="@{/MainGallery/seniorAdminDashboard}">Dashboard</a>
      <a th:case="'student'"      th:href="@{/MainGallery/studentDashboard}">Dashboard</a>
      <a th:case="'employer'"     th:href="@{/MainGallery/employerDashboard}">Dashboard</a>
      <a th:case="*"              th:href="@{/MainGallery/dashboard}">Dashboard</a>
    </span>

    <!-- Logout -->
    <a th:if="${user != null}" th:href="@{/MainGallery/Logout}" onclick="return confirm('Log out now?')">Logout</a>

    <!-- Profile Icon -->
    <div class="icon-button" th:with="isLoggedIn=${user != null}">
      <a th:if="${isLoggedIn}" th:href="@{/MainGallery/profile}">
        <i class="fas fa-user"></i>
      </a>
      <a th:if="${!isLoggedIn}" th:href="@{/MainGallery/Login}">
        <i class="fas fa-user"></i>
      </a>
    </div>

    <!-- ðŸ” PROJECT SEARCH SECTION -->
    <div class="container mt-5">

      <!-- Search Form -->
      <form th:action="@{/MainGallery/searchProjects}" method="get" class="d-flex gap-2 mb-4">
        <input type="text" name="keyword"
               th:value="${keyword}"
               placeholder="Search projects..."
               class="form-control"
               style="max-width: 400px;">
        <button><i class="fas fa-search"></i></a></button>
      </form>

    </div>

  </nav>
</header>
<!-- /HEADER -->

<body class="bg-light">

<!-- Showcase Header -->
<section class="py-5 text-center bg-dark text-white">
  <div class="container">
    <h1 class="display-5 fw-bold" th:text="${showcase.name}">Showcase Name</h1>
    <p class="lead mt-3" th:text="${showcase.description}">
      This showcase highlights the latest student projects.
    </p>
  </div>
</section>

<!-- Projects Grid -->
<section class="container my-5">
  <h3 class="mb-4 text-center">Projects in this Showcase</h3>

  <!-- No projects -->
  <div th:if="${#lists.isEmpty(projects)}" class="alert alert-secondary text-center">
    No projects in this showcase yet.
  </div>

  <!-- Projects Grid -->
  <div class="row g-4" th:if="${!#lists.isEmpty(projects)}">
    <div class="col-lg-4 col-md-6 col-sm-12" th:each="project : ${projects}">
      <div class="card h-100 shadow-sm border-0 rounded-3">
        <img th:src="@{'/assets/images/projects/thumbnail/thumb_' + ${project.projectHeroImage}}"
             class="card-img-top" alt="Project Image"
             style="height: 220px; object-fit: cover; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">

        <div class="card-body d-flex flex-column">
          <h5 class="card-title text-primary fw-semibold" th:text="${project.projectName}">Project Title</h5>
          <p class="card-text flex-grow-1 text-muted"
             th:text="${project.projectDescriptionSummary != null ? project.projectDescriptionSummary : project.projectDescription}">
          </p>
        </div>

        <div class="card-footer bg-white border-0 text-end">
          <a th:href="@{'/project/projectDetails/' + ${project.projectId}}"
             class="btn btn-outline-primary btn-sm me-2">
            View Details
          </a>

          <!-- ðŸš« Remove from Showcase (Admin Only) -->
          <th:block th:if="${session.loggedInUser != null and #strings.equalsIgnoreCase(session.loggedInUser.userType, 'admin')}">
            <form th:action="@{/MainGallery/browseShowcase/{showcaseId}/removeProject/{projectId}(showcaseId=${showcase.showcaseId}, projectId=${project.projectId})}"
                  method="post"
                  style="display:inline-block;"
                  onsubmit="return confirm('Remove this project from the showcase?');">
              <button type="submit" class="btn btn-outline-danger btn-sm">
                Remove
              </button>
            </form>
          </th:block>
        </div>




      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <h4 style="color: white;">LOGO GOES HERE</h4><br>
  <div class="copy">Â© 2024 TUS GALLERY</div>

  <div class="bottom-links">
    <div class="links">
      <span>More Info</span>
      <a href="#">Home</a>
      <a href="#">About</a>
      <a href="#">Contact</a>
    </div>

    <div class="links">
      <span>Social Links</span>
      <a href="#"><i class="fab fa-facebook"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
    </div>
  </div>
</footer>

</body>
</html>
