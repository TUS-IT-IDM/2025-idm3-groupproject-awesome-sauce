<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Search Results</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" type="text/css" href="/assets/css/lcstyle.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<!-- HEADER (reuses your nav bar) -->
<header class="header p-3 border-bottom" th:with="user=${session.loggedInUser}">
  <div class="container d-flex justify-content-between align-items-center">
    <a th:href="@{/MainGallery/HomePage}" class="logo fs-4 fw-bold text-decoration-none">LOGO GOES HERE</a>

    <nav class="nav-items d-flex align-items-center gap-3">
      <a th:href="@{/MainGallery/HomePage}" class="text-decoration-none">Home</a>

      <a th:if="${user == null}" th:href="@{/MainGallery/Register}" class="text-primary text-decoration-none">Register</a>
      <a th:if="${user == null}" th:href="@{/MainGallery/Login}" class="text-primary text-decoration-none">Sign-In</a>

      <a th:if="${user != null}" th:href="@{/MainGallery/profile}" class="text-decoration-none">Profile</a>

      <a th:if="${user != null}" th:href="@{/MainGallery/Logout}" onclick="return confirm('Log out now?')" class="text-decoration-none">
        Logout
      </a>

      <div class="icon-button" th:with="isLoggedIn=${user != null}">
        <a th:if="${isLoggedIn}" th:href="@{/MainGallery/profile}">
          <i class="fas fa-user"></i>
        </a>
        <a th:if="${!isLoggedIn}" th:href="@{/MainGallery/Login}">
          <i class="fas fa-user"></i>
        </a>
      </div>
    </nav>
  </div>
</header>

<!-- MAIN CONTENT -->
<div class="container my-5">
  <h2 class="mb-4">Search Results for "<span th:text="${keyword}"></span>"</h2>

  <div th:if="${#lists.isEmpty(projects)}" class="alert alert-warning text-center">
    No projects found for "<span th:text="${keyword}"></span>".
    <a th:href="@{/MainGallery/HomePage}" class="alert-link">Go back</a>
  </div>

  <div class="row" th:if="${!#lists.isEmpty(projects)}">
    <div class="col-md-6 col-lg-4 mb-4" th:each="project : ${projects}">
      <div class="card h-100 shadow-sm">
        <img th:src="@{'/assets/images/projects/thumbnail/thumb_' + ${project.projectHeroImage}}"
             class="card-img-top"
             alt="Project Image"
             style="height: 180px; object-fit: cover;">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title" th:text="${project.projectName}"></h5>
          <p class="card-text text-truncate" th:text="${project.projectDescription}"></p>

          <div class="mt-auto d-flex justify-content-between">
            <a th:href="@{'/project/projectDetails/' + ${project.projectId}}" class="btn btn-primary btn-sm">
              View Project
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <a th:href="@{/MainGallery/HomePage}" class="btn btn-secondary mt-3">← Back to Home</a>
</div>

<!-- Footer -->
<footer class="footer">
  <h4 style="color: white;">LOGO GOES HERE</h4><br>
  <div class="copy">© 2024 TUS GALLERY</div>

  <div class="bottom-links">
    <div class="links">
      <span>More Info</span>
      <a href="#">Home</a>
      <a href="#">About</a>
      <a href="#">Contact</a>
    </div>

    <div class="links">
      <span>Social Links</span>
      <a href="#"><i class="fab fa-facebook"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
    </div>
  </div>
</footer>

</body>
</html>